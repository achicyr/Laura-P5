var str=document.location,url=new URL(str),search_params=new URLSearchParams(url.search);if(search_params.has("id"))var id=search_params.get("id");let oneProduct;function produits(e){let t=document.querySelector(".item__img");console.log(t);let o=document.createElement("img");o.src=e.imageUrl,o.alt=e.altTxt,t.appendChild(o);let l=document.querySelector("#title"),r=document.querySelector("#price"),n=document.querySelector("#description");l.innerText=e.name,r.innerText=e.price,n.innerText=e.description;for(let t of e.colors){console.log(t);let e=document.createElement("option");document.querySelector("#colors").appendChild(e),e.value=t,e.innerHTML=t}console.log("couleur ok")}function addToCart(){console.log("click ok "+oneProduct);let e=document.querySelector("#quantity"),t=document.querySelector("#colors"),o={id:oneProduct._id,color:t.value,quantity:e.value};console.log(o);let l=oneProduct.name+t.value,r=o.quantity;null==localStorage.getItem("cart")&&localStorage.setItem("cart","{}");let n=JSON.parse(localStorage.getItem("cart"));console.log(n);let a=n[l]?.quantity;if(""==t.value)result=window.alert("Choisir la couleur");else if(0==e.value)result=window.alert("Quantité invalide");else{if(console.log(n),n[l]){console.log("existe deja");let e=parseInt(a)+parseInt(r);console.log("total produit:"+e),n[l].quantity=e,n=JSON.stringify(n),localStorage.setItem("cart",n)}else console.log("n existe pas encore"),n[l]=o,n=JSON.stringify(n),localStorage.setItem("cart",n);confirm("Votre panier a bien été rajouté du produit .... avec la quntitié ...\nVoulez-vous aller au panier ?")&&(location.href="cart.html")}}console.log(id),fetch("http://localhost:3000/api/products/"+id).then((e=>e.json())).then((e=>{console.log(e),produits(e),oneProduct=e}));let button=document.querySelector("#addToCart");window.onload=function(){button.addEventListener("click",addToCart)};
//# sourceMappingURL=product.929b0993.js.map
